\documentclass[CJKutf8,xcolor=pdftex,dvipsnames,table]{report}
\usepackage{hyperref}
\hypersetup{
  pdftitle={Operating System Concepts},
  pdfauthor={Hong MingJian},
  pdfsubject={The EPOS Source code},
%  pdfpagemode={FullScreen},
  colorlinks={true},
  linkcolor={blue},
}
\usepackage{CJKutf8}
\usepackage{minted} %  -shell-escape
\usepackage{caption} % for \captionof
\usepackage{pgffor} % for \foreach
\usepackage{listings}

\title{THE EPOS SOURCE CODE}
\author{洪明坚\ 重庆大学软件学院}
\date{2014年10月}

\begin{document}
\begin{CJK*}{UTF8}{song}

\maketitle

\renewcommand\listoflistingscaption{List of source codes}
\listoflistings

\newpage
\captionof{listing}{Makefile}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{make}{../Makefile}

\newpage
\captionof{listing}{Makefile.inc}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{make}{../Makefile.inc}

\newpage
\captionof{listing}{include/syscall-nr.h}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{c}{../include/syscall-nr.h}

\newpage
\captionof{listing}{kernel/Makefile}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{make}{../kernel/Makefile}

\newpage
\captionof{listing}{kernel/kernel.ld.in}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{c}{../kernel/kernel.ld.in}

\newpage
\captionof{listing}{kernel/entry.S}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{gas}{../kernel/entry.S}

\foreach \n in
{machdep.c,startup.c,task.c,page.c,frame.c,timer.c,kbd.c,cpu.h,kernel.h,machdep.h}{
    \newpage
    \captionof{listing}{kernel/\n}
    \inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{c}{../kernel/\n}
}

\newpage
\captionof{listing}{userapp/Makefile}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{make}{../userapp/Makefile}

\newpage
\captionof{listing}{userapp/lib/crt0.S}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{gas}{../userapp/lib/crt0.S}

\newpage
\captionof{listing}{userapp/main.c}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{c}{../userapp/main.c}

\newpage
\captionof{listing}{userapp/lib/syscall-wrapper.S}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{gas}{../userapp/lib/syscall-wrapper.S}

\newpage
\captionof{listing}{userapp/include/syscall.h}
\inputminted[linenos,numbersep=5pt,frame=lines,framesep=2mm,breaklines,tabsize=2]{c}{../userapp/include/syscall.h}

\end{CJK*}
\end{document}
